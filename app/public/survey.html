<!DOCTYPE <!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>Philly Friend Finder Survey</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- bootstrap -->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T"
        crossorigin="anonymous">

    <script src="https://code.jquery.com/jquery-3.3.1.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8="
        crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js" integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1"
        crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js" integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM"
        crossorigin="anonymous"></script>
    <!-- <link rel="stylesheet" type="text/css" media="screen" href="./main.css"> -->
    <link href="https://fonts.googleapis.com/css?family=Press+Start+2P" rel="stylesheet">
    <link href="https://unpkg.com/nes.css@latest/css/nes.min.css" rel="stylesheet" />
    <style>
        html, body, pre, code, kbd, samp {
            font-family: 'Press Start 2P', cursive;
        }
      </style>
</head>

<body>
    <div class="container">
        <h1>SURVEY QUESTIONS</h1>
        <hr>
        <form class="form nes-container with-title" id="friendForm">
            <h3 class="title" >ABOUT YOU</h3>
            <div class="form-group">
                <h5>Your Name (Required)</h5>
                <input type="text" id="name" class=" form-control mb-3" required>
                <h5>Link to Photo Image (Required)</h5>
                <input type="text" id="photo" class=" form-control mb-3" required>
            </div>
            <h3>Question 1</h3>
            <h5>You consider yourself an independent person.</h5>
            <select class=" form-control mb-3 selects" id="q1" required>
                <option value=""></option>
                <option value="1">1 (strongly disagree)</option>
                <option value="2">2</option>
                <option value="3">3</option>
                <option value="4">4</option>
                <option value="5">5 (strongly agree)</option>
            </select>
            <h3>Question 2</h3>
            <h5>You treat your neighbor like a brother.</h5>
            <select class=" form-control mb-3" id="q2" required>
                <option value=""></option>
                <option value="1">1 (strongly disagree)</option>
                <option value="2">2</option>
                <option value="3">3</option>
                <option value="4">4</option>
                <option value="5">5 (strongly agree)</option>
            </select>
            <h3>Question 3</h3>
            <h5>You prefer your steak with cheese</h5>
            <select class=" form-control mb-3" id="q3" required>
                <option value=""></option>
                <option value="1">1 (never)</option>
                <option value="2">2</option>
                <option value="3">3</option>
                <option value="4">4</option>
                <option value="5">5 (always)</option>
            </select>
            <h3>Question 4</h3>
            <h5>You are offended by this survey</h5>
            <select class=" form-control mb-3" id="q4" required>
                <option value=""></option>
                <option value="1">1 (strongly disagree)</option>
                <option value="2">2</option>
                <option value="3">3</option>
                <option value="4">4</option>
                <option value="5">5 (strongly agree)</option>
            </select>
            <h3>Question 5</h3>
            <h5>You use the term "jawn" in conversation</h5>
            <select class=" form-control mb-3" id="q5" required>
                <option value=""></option>
                <option value="1">1 (never. WTF is a "jawn"?)</option>
                <option value="2">2</option>
                <option value="3">3</option>
                <option value="4">4</option>
                <option value="5">5 (all the freakin' time)</option>
            </select>
            <h3>Question 6</h3>
            <h5>You consider potholes a fact of life.</h5>
            <select class=" form-control mb-3" id="q6" required>
                <option value=""></option>
                <option value="1">1 (strongly disagree)</option>
                <option value="2">2</option>
                <option value="3">3</option>
                <option value="4">4</option>
                <option value="5">5 (strongly agree)</option>
            </select>
            <h3>Question 7</h3>
            <h5>You find bells liberating.</h5>
            <select class=" form-control mb-3" id="q7" required>
                <option value=""></option>
                <option value="1">1 (strongly disagree)</option>
                <option value="2">2</option>
                <option value="3">3</option>
                <option value="4">4</option>
                <option value="5">5 (strongly agree)</option>
            </select>
            <h3>Question 8</h3>
            <h5>Fly Eagles fly.</h5>
            <select class=" form-control mb-3" id="q8" required>
                <option value=""></option>
                <option value="1">1 (huh?)</option>
                <option value="2">2</option>
                <option value="3">3</option>
                <option value="4">4</option>
                <option value="5">5 (YES!)</option>
            </select>
            <h3>Question 9</h3>
            <h5>You are a gritty person.</h5>
            <select class=" form-control mb-3" id="q9" required>
                <option value=""></option>
                <option value="1">1 (strongly disagree)</option>
                <option value="2">2</option>
                <option value="3">3</option>
                <option value="4">4</option>
                <option value="5">5 (strongly agree)</option>
            </select>
            <h3>Question 10</h3>
            <h5>Philadelphia is your favorite city on earth.</h5>
            <select class=" form-control mb-3" id="q10" required>
                <option value=""></option>
                <option value="1">1 (strongly disagree)</option>
                <option value="2">2</option>
                <option value="3">3</option>
                <option value="4">4</option>
                <option value="5">5 (strongly agree)</option>
            </select>
            <button type="submit" class=" btn btn-secondary btn-block btn-lg nes-btn" id="submit">I'M FINISHED</button>
        </form>
        <footer class="footer">
            <div class="container d-flex flex-row">
                <p> <a id="link" href="/api/friends">API FRIENDS LIST</a></p>
                <a href="https://github.com/AKluger/FriendFinder"><i class = "nes-octocat animate"> </i></a>
            </div>
        </footer>
    </div>
    <!-- Modal to display match results-->
    <div class="modal fade" id="matchModal" tabindex="-1" role="dialog" aria-hidden="true">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">This is your Match! <i class="nes-icon star is-medium"></i></h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body">
                    <h5 id="match"></h5>
                    </hr>
                    <img class="rounded" id="matchPhoto" style="max-width: 400px; max-height: 250px;">


                </div>
                <div class="modal-footer">
                    <button type="button" class="btn" data-dismiss="modal">Close</button>
                </div>
            </div>
        </div>
    </div>


    <script type="text/javascript">
        $("#submit").on("click", function (event) {
            event.preventDefault();

            var friendForm = document.getElementById('friendForm');
            isValid = friendForm.checkValidity();

            //    if form is valid assign user input to variable and post to friends api
            if (isValid) {
                var userData = {
                    "name": document.getElementById("name").value,
                    "photo": document.getElementById("photo").value,
                    "scores": [
                        +document.getElementById("q1").value,
                        +document.getElementById("q2").value,
                        +document.getElementById("q3").value,
                        +document.getElementById("q4").value,
                        +document.getElementById("q5").value,
                        +document.getElementById("q6").value,
                        +document.getElementById("q7").value,
                        +document.getElementById("q8").value,
                        +document.getElementById("q9").value,
                        +document.getElementById("q10").value
                    ]
                }

                $.post("/api/friends", userData, function (data) {
                    console.log(data);
                    $("#match").text(data.name);
                    $("#matchPhoto").attr("src", data.photo);
                    $("#matchModal").modal("toggle");
                })
            }
            else { alert("Finish this jawn!") }
        })
    </script>
</body>

</html>